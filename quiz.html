<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JangAfrica Learning Centre</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: lightblue;
      text-align: center;
      margin: 0;
      padding: 20px;
    }

    h1.title {
      font-family: "Arial Black", sans-serif;
      font-size: 24px;
      color: black;
      font-weight: bold;
    }

    #quiz, #result { display: none; }
    .question { font-size: 14pt; margin: 20px; }
    input, select { padding: 8px; font-size: 16px; margin: 5px; }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 10px;
      background-color: green;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #progressBar {
      width: 100%;
      background: #ddd;
      margin: 10px 0;
    }
    #progressBar div {
      height: 20px;
      width: 0%;
      background: green;
    }

    /* Print Styles */
    @media print {
      body { background: white; }
      #printArea {
        padding: 40px;
        text-align: center;
        width: 100%;
      }
      #printArea h1, #printArea h2, #printArea p {
        margin: 8px 0;
      }
      .signature {
        margin-top: 60px;
        text-align: center;
      }
      /* Hide everything except print area */
      button, #quiz, #result, #start { display: none !important; }
    }
  </style>
</head>
<body>
  <h1 class="title">JangAfrica Learning Centre</h1>

  <!-- Start Section -->
  <div id="start">
    <p>Enter your details to start:</p>
    <input id="name" type="text" placeholder="Your Name"><br>
    <input id="age" type="number" placeholder="Your Age"><br>
    <input id="grade" type="number" placeholder="Class Level (1-6)" min="1" max="6"><br>
    <input id="numQuestions" type="number" placeholder="Number of Questions" min="1"><br>
    <input id="timeLimit" type="number" placeholder="Time in Minutes" min="1"><br>
    <button onclick="startQuiz()">Start Quiz</button>
  </div>

  <!-- Quiz Section -->
  <div id="quiz">
    <p id="timer">Time left: 00:00</p>
    <div id="progressBar"><div></div></div>
    <p class="question" id="question"></p>
    <input id="answer" type="number" placeholder="Enter answer">
    <button onclick="submitAnswer()">Submit</button>
    <p id="score">Correct: 0 | Wrong: 0</p>
    <button onclick="finishQuiz()">Terminate</button>
  </div>

  <!-- Result Section -->
  <div id="result">
    <h2>Quiz Finished!</h2>
    <p id="summary"></p>
    <button onclick="printResult()">Print Result</button>
    <button onclick="restartQuiz()">Start New Quiz</button>
  </div>

  <!-- Hidden Printable Section -->
  <div id="printArea" style="display:none;">
    <h1>JangAfrica Learning Centre</h1>
    <h2>Quiz Result</h2>
    <p id="printName"></p>
    <p id="printAge"></p>
    <p id="printGrade"></p>
    <p id="printAttempted"></p>
    <p id="printCorrect"></p>
    <p id="printPercentage"></p>
    <p id="printRemark"></p>
    <p id="printDate"></p>

    <div class="signature">
      <p>__________________________</p>
      <p>Mr. Ebrima Jobe</p>
    </div>
  </div>

  <script>
    let correct = 0, wrong = 0, num1, num2, answer;
    let totalQuestions, attempted = 0;
    let endTime, timerInterval;
    let userName, userAge, userGrade, timeLimit;

    function startQuiz() {
      userName = document.getElementById("name").value;
      userAge = document.getElementById("age").value;
      userGrade = parseInt(document.getElementById("grade").value);
      totalQuestions = parseInt(document.getElementById("numQuestions").value);
      timeLimit = parseInt(document.getElementById("timeLimit").value);

      if (!userName || !userAge || !userGrade || !totalQuestions || !timeLimit) {
        alert("Please fill all fields!");
        return;
      }

      document.getElementById("start").style.display = "none";
      document.getElementById("quiz").style.display = "block";

      endTime = Date.now() + timeLimit * 60 * 1000;
      nextQuestion();
      timerInterval = setInterval(updateTimer, 1000);

      document.getElementById("answer").addEventListener("keyup", function(e) {
        if (e.key === "Enter") submitAnswer();
      });
    }

    function getDifficultyMultiplier(grade) {
      switch (grade) {
        case 1: return 5;    // simple
        case 2: return 10;   // medium
        case 3: return 20;   // difficult
        case 4: return 50;   // hard
        case 5: return 100;  // harder
        case 6: return 200;  // hardest
        default: return 10;
      }
    }

    function nextQuestion() {
      if (attempted >= totalQuestions) {
        finishQuiz();
        return;
      }

      let multiplier = getDifficultyMultiplier(userGrade);
      num1 = Math.floor(Math.random() * multiplier) + 1;
      num2 = Math.floor(Math.random() * multiplier) + 1;
      answer = num1 * num2;

      document.getElementById("question").textContent = `${num1} Ã— ${num2} = ?`;
      document.getElementById("answer").value = "";
      document.getElementById("answer").focus();

      updateProgress();
    }

    function submitAnswer() {
      let userAnswer = parseInt(document.getElementById("answer").value);
      attempted++;

      if (!isNaN(userAnswer) && userAnswer === answer) {
        correct++;
      } else {
        wrong++;
      }

      document.getElementById("score").textContent = `Correct: ${correct} | Wrong: ${wrong}`;
      nextQuestion();
    }

    function updateProgress() {
      let percent = (attempted / totalQuestions) * 100;
      document.querySelector("#progressBar div").style.width = percent + "%";
    }

    function updateTimer() {
      let remaining = endTime - Date.now();
      if (remaining <= 0) {
        clearInterval(timerInterval);
        finishQuiz();
        return;
      }
      let minutes = Math.floor(remaining / 1000 / 60);
      let seconds = Math.floor((remaining / 1000) % 60);
      document.getElementById("timer").textContent =
        `Time left: ${minutes.toString().padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`;
    }

    function finishQuiz() {
      clearInterval(timerInterval);
      document.getElementById("quiz").style.display = "none";
      document.getElementById("result").style.display = "block";

      let percent = (correct / attempted) * 100;
      let remark =
        percent >= 85 ? "Excellent" :
        percent >= 75 ? "Very Good" :
        percent >= 65 ? "Good" :
        percent >= 50 ? "Fair" : "Need to Adjust";

      let date = new Date().toLocaleString();

      document.getElementById("summary").innerText =
        `Name: ${userName}\nAge: ${userAge}\nClass Level: ${userGrade}\n` +
        `Number of Questions Attempted: ${attempted}\nNumber Correct: ${correct}\n` +
        `Percentage Score: ${percent.toFixed(2)}%\nRemark: ${remark}\nDate & Time: ${date}`;

      // Fill printable section
      document.getElementById("printName").innerText = `Name: ${userName}`;
      document.getElementById("printAge").innerText = `Age: ${userAge}`;
      document.getElementById("printGrade").innerText = `Class Level: ${userGrade}`;
      document.getElementById("printAttempted").innerText = `Number of Questions Attempted: ${attempted}`;
      document.getElementById("printCorrect").innerText = `Number Correct: ${correct}`;
      document.getElementById("printPercentage").innerText = `Percentage Score: ${percent.toFixed(2)}%`;
      document.getElementById("printRemark").innerText = `Remark: ${remark}`;
      document.getElementById("printDate").innerText = `Date & Time: ${date}`;
    }

    function printResult() {
      document.getElementById("printArea").style.display = "block";
      window.print();
      document.getElementById("printArea").style.display = "none";
    }

    function restartQuiz() {
      correct = 0; wrong = 0; attempted = 0;
      document.getElementById("result").style.display = "none";
      document.getElementById("start").style.display = "block";
      document.querySelector("#progressBar div").style.width = "0%";
    }
  </script>
</body>
</html>
